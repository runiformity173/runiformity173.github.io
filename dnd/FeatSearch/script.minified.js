let FILTERS={level:[],book:["Player's"],class:[],ritual:[],school:[]},filterttt="",spells=JSON.parse(JSON.stringify(spells2));function lower(e){return"string"!=typeof e?e:e.toLowerCase()}function checkAll(e,l){if(l.checked){let s=document.getElementsByClassName(e);for(let t of s)t.checked=!0;return}let r=document.getElementsByClassName(e);for(let a of r)a.checked=!1}function start(){for(i in spells=JSON.parse(JSON.stringify(spells2)),FILTERS={level:[],book:["Player's"],class:[],ritual:[],school:[]},levels=["level0","level1","level2","level3","level4","level5","level6","level7","level8","level9"])document.getElementById(levels[i]).checked&&FILTERS.level.push(Number(levels[i].slice(-1)));for(i in classTransforms={classWizard:"wizard",classWarlock:"warlock",classSorcerer:"sorcerer",classDruid:"druid",classBard:"bard",classRanger:"ranger",classPaladin:"paladin",classArtificer:"artificer",classCleric:"cleric"},classes=["classWizard","classWarlock","classSorcerer","classDruid","classBard","classRanger","classPaladin","classArtificer","classCleric"])document.getElementById(classes[i]).checked&&FILTERS.class.push(classTransforms[classes[i]]);for(i in schools=["Transmutation","Divination","Abjuration","Necromancy","Evocation","Enchantment","Illusion","Alteration","Conjuration"])console.log(schools[i]),document.getElementById("school"+schools[i]).checked&&FILTERS.school.push(schools[i].toLowerCase());for(filtern in document.getElementById("ritual").checked&&FILTERS.ritual.push(!0),document.getElementById("books").checked&&["Xanathar's","Tasha's","Fizban's","Guildmaster's"].forEach(e=>{FILTERS.book.push(e)}),console.log(FILTERS),console.log(spells.length),spells=spells.filter(filterFunction),console.log(spells.length),FILTERS)filtern.includes("class")&&FILTERS[filtern].length>0?spells=spells.filter(filterClasses):filtern.includes("level")?spells=spells.filter(filterLevels):!filtern.includes("book")&&FILTERS[filtern].length>0&&(filterttt=filtern,spells=spells.filter(filterMisc)),console.log(spells.length,filtern);for(let e of(document.getElementById("output").innerHTML="",spells)){let l=document.createElement("a"),s=document.createTextNode(e.name+"");l.appendChild(s),l.href="https://dndspellsearch.ezhgamer173.repl.co/display/?spell="+e.name.toLowerCase().replaceAll(" ","-"),l.target="_blank",document.getElementById("output").appendChild(l),document.getElementById("output").appendChild(document.createElement("br"))}}function getClass(e){return e.class.split(", ")}function filterFunction(e){for(let l of FILTERS.book)if(e.source.toLowerCase().includes(l.toLowerCase()))return!0;return!1}function filterClasses(e){for(let l of FILTERS.class)if(e.class.toLowerCase().includes(l.toLowerCase()))return!0;return!1}function filterLevels(e){return FILTERS.level.includes(e.level)}function getByName(e){for(let l of spells)if(l.name.toLowerCase().includes(e.toLowerCase()))return l;console.log('No Spell Matching "'+e+'"')}function filterMisc(e){return FILTERS[filterttt].includes(lower(e[filterttt]))}