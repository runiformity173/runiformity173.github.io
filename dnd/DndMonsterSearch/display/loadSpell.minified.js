let level=0;function validURL(e){for(let t of e.toLowerCase().split(""))if(!"abcdefghijklmnopqrstuvwxyz0123456789-.".includes(t))return!1;return!0}function set2(e,t){setCookie(e,JSON.stringify(t))}function get2(e){return JSON.parse(getCookie(e))}function setCookie(e,t){var n="",l=new Date;l.setTime(l.getTime()+432e10),n="; expires="+l.toUTCString(),document.cookie=e+"="+(t||"")+n+"; path=/"}function getCookie(e){for(var t=e+"=",n=document.cookie.split(";"),l=0;l<n.length;l++){for(var o=n[l];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null}function load(){if(window.location.href.includes("?")){let e=getByName(window.location.href.split("?spell=")[1].replaceAll("-"," ").replaceAll("%27","'"));document.getElementById("output2").innerHTML=e.name,document.getElementById("output").innerHTML+="<i>",level=e.level,e.level>0?document.getElementById("output").innerHTML+=(ordinal[String(e.level)]+e.school).italics():document.getElementById("output").innerHTML+=(e.school+" cantrip").italics(),e.ritual&&(document.getElementById("output").innerHTML+=" (ritual)".italics()),document.getElementById("output").innerHTML+="</i>",document.getElementById("output").innerHTML+="<br><br><strong>Casting Time: </strong>"+e.casting,document.getElementById("output").innerHTML+="<br><strong>Range: </strong>"+e.range,document.getElementById("output").innerHTML+="<br><strong>Components: </strong>"+e.components,document.getElementById("output").innerHTML+="<br><strong>Duration: </strong>"+e.duration,document.getElementById("output").innerHTML+="<br><br>"+e.description.replaceAll("\n\n","<br>&emsp;"),document.getElementById("output").innerHTML+="<br><strong>Classes: </strong>"+e.class+"<br>",document.getElementById("output").innerHTML+="<strong>Source: </strong>"+e.source+"<br>"}}function saveSpell(){let e=[],t=document.cookie.split(";"),n=[];for(val in t)t[val].includes("_")||(n.push('"'+t[val].split("=")[0].replace(" ","")),e.push(t[val].split("=")[0].replace(" ","")));2==n.length?n[0]+='" and '+n.pop()+'"':n.length>2&&(n[n.length-1]="and "+n[n.length-1]+'"');let l=prompt("Which list would you like to add this spell to? Currently, you have "+(n.length>0?n.join('," '):"none")+". Alternatively, enter a name not on that list to create a new one.").replaceAll(" ","-").toLowerCase();if(!validURL(l))return alert("Please use only letters, digits, and hyphens."),"";if(e.includes(l)){let o=get2(l),r={name:document.getElementById("output2").innerHTML,linkd:window.location.href,level:level};o.includes(r)||o.push(r),set2(l,o)}else set2(l,[{name:document.getElementById("output2").innerHTML,linkd:window.location.href,level:level}]);console.log(e,l)}ordinal={1:"1st-level ",2:"2nd-level ",3:"3rd-level ",4:"4th-level ",5:"5th-level ",6:"6th-level ",7:"7th-level ",8:"8th-level ",9:"9th-level "};